> # 프로젝트명 : Carbonlease ( 탄소 절약 인증 플랫폼 )

### 한 줄 소개
* 탄소 절약 활동을 기록·공유하고, 캠페인 및 공지사항을 통해 친환경 활동을 장려하는 웹 서비스입니다.

> ## 메인 화면

<img width="1216" height="771" alt="메인1" src="https://github.com/user-attachments/assets/6fa7f362-c375-49de-8b9f-dd542da0bd24" />

> ## 프로젝트 소개

&nbsp; 이 프로젝트는 Spring Boot & React 기반의 웹 서비스로,
CRUD, JWT 기반 인증, REST API, 파일 업로드, 공공데이터 API  <br />
활용, 관리자 기능 웹 개발의 전반적인 기능을 구현하고 학습하는 것을 목표로 하였습니다.

> ## 개발 기간

* 2025.11.10 ~ 2025.12.10 (약 4주)
* 개발 인원 총 5명

> ## 주요 기능

* ### 메인 ###
  * 지역별 전력 사용량 데이터를 가져와 버블맵으로 시각화
  * useRegionStatsMap 훅에서 지도 상태·버블 크기·Tooltip·Loading 등을 통합 관리
  * RegionStatsMap.jsx에서 SVG 지도 렌더링 및 버블 표시
  * 지역 클릭/호버 등 인터렉션 처리로 직관적인 전력 사용량 탐색 제공

* ### 회원 관리 ###
  * 회원가입 / 로그인 (JWT 인증)
  * 토큰 기반 권한 부여 (일반 사용자 / 관리자)
  * 정보 수정 및 탈퇴
  * 카카오 주소 검색 API를 이용한 주소 입력
  * AccessToken & RefreshToken 관리

* ### 일반 게시판 ###
  * 조회수 / 좋아요 카운트
  * 기본 CRUD
  * 페이징 처리

* ### 인증 게시판 ###
  * 사진 업로드
  * 조회수 / 좋아요 카운트
  * 댓글 CRUD
  * 지도 기반 좌표 저장
  * 썸네일 이미지 처리
  * 페이징 처리

* ### 공지사항 게시판 ###
  * 공지 등록 / 수정 / 삭제
  * 상세 조회 및 목록 페이징
  * 캘린더 API를 이용한 일정 관리
 
*  ### 캠페인 ###
   * 캠페인 생성 / 수정 / 삭제
   * 캠페인 상태 (진행 / 종료 / 삭제) 표시
   * 좋아요 기능

* ### 실시간 대기오염 정보 제공 ###
  * 공공데이터 API 연동
  * 지역·시도별 실시간 대기질 조회
  * 캐싱 및 Rate-limit을 통한 요청 최소화
 
* ### 관리자 페이지 ###
  * 게시글 숨김 / 복구 / 삭제
  * 사용자 상태 관리
  * 공지사항 및 캠페인 등록 및 수정
  * 모든 게시판 관리
  * ROLE_ADMIN 전용 기능
 
> ## 기술 스택
### Frontend
* React
* Node.js
* Bootstrap
* Styled-Components
* Axios

> ## 프로젝트 구조

<img width="214" height="509" alt="프로젝트 구조" src="https://github.com/user-attachments/assets/5d79443c-86f4-4df1-8dac-773868dbf9f6" />

> ## 주요 트러블 슈팅

> ### 박수현

1. 전력 사용량 데이터 누락·불일치로 인해 버블맵이 정상 렌더링되지 않는 문제
   * 문제점
     외부 API에서 특정 연·월 데이터가 없거나 형식이 불완전한 경우가 발생하여 <br />
     버블맵이 렌더링되지 않거나 일부 지역 버블이 표시되지 않는 문제가 나타남. <br />
     이로 인해 지도 UI가 깨지거나 로딩/오류 상태가 반복적으로 발생함. <br />
   * 원인 분석
     1. 외부 API가 모든 월의 데이터를 제공하지 않음(월별 데이터 공백 존재)
     2. 지역명이 불규칙하게 전달되어(공백, 축약, 다른 표기 방식) <br />
        지도 좌표 매핑(RegionCoords)과 연결되지 않는 경우가 있었음.
     3. null·빈 배열 등 불완전한 응답도 존재하여 버블 크기 계산에 실패함 <br />
   * 해결 방법
     -> 정상 데이터가 존재하는 연·월을 자동 탐색하는 유효성 검증 로직 적용 <br />
        (recent 데이터 fallback 처리) <br />
     -> API에서 받은 지역명을 지도 좌표 데이터와 일치시키기 위한 <br />
        지역명 normalize 함수 추가 <br />
     -> null 응답, 빈 데이터, 매칭 실패 지역에 대해 <br />
        fallback 값 적용 + 안전한 렌더링 처리(useRegionStatsMap) <br />
     -> 버블 계산/지도 렌더링을 useMemo/useEffect로 분리하여 <br />
        불완전한 데이터로 인해 전체 UI가 깨지지 않도록 안정화 <br />

> ### 박세혁

 1. 관리자 로그인 시 라우트 접근 문제
    * 문제점
      관리자가 아닌 사용자도 관리자 페이지에 접근할 수 있는 문제가 있었으며, <br />
      반대로 관리자 로그인 시에도 auth.role이 초기값(null)으로 먼저 렌더링되어 <br />
      관리자가 로그인 페이지로 강제로 리다이렉트되는 현상이 발생함. <br />
    * 해결 방법
      AdminLayout에서 현재 URL(window.location.pathname)을 저장한 뒤, <br />
      auth.role이 갱신되면 <br />
      -> 관리자 : 저장된 경로로 복귀 <br />
      -> 일반 사용자 / 비로그인: 로그인 페이지로 이동 <br />
         이 과정을 통해 모든 권한 검증이 안정적으로 동작하도록 수정함. <br />
 2. 새로고침 시 Refresh Token이 불필요하게 재발급되는 문제
     * 문제점
       페이지를 새로고침할 때마다 useEffect가 실행되며 <br />
       토큰 갱신 API(/auth/refresh)가 반복 호출됨. <br />
       그 결과 Access Token 만료 여부와 관계없이 Refresh Token이 지속적으로 재발급 <br />
       되는 문제가 발생함. <br />
     * 원인 분석
       1. 토큰 갱신 로직을 단순히 useEffect 안에 두었기 때문에 <br />
       렌더링 or 새로고침 시 무조건 실행됨.
       2. Access Token의 실제 만료 여부를 체크하지 않아 <br />
       불필요한 Refresh 요청이 계속 발생. <br />
     * 해결 방법
       -> 백엔드에서 Access Token의 만료 시작(exp)을 포함한 데이터를 전달받도록 수정<br />
       -> 프론트에서 토큰 만료 여부를 사전에 계산하여 <br />
          실제 만료된 경우에만 Refresh 요청을 수행하도록 구조 변경 <br />
       -> 그 결과 새로고침 시 매번 토큰이 재발급되는 현상이 사라지고 <br />
          의도된 시점에서만 안전하게 토큰 재발급이 이루어지도록 개선됨.<br />

> ### 백준걸
1. 대기질 API 과다 요청 -> 429 Too Many Requests
   * 공공데이터 API 구조상 호출 제한(일일/분당)이 존재하여 <br />
     지역 변경·시도 변경 시 불필요한 요청이 반복적으로 발생하며 429 에러 유발. <br />
   * 해결 방법 <br />
     -> API 응답 캐싱 적용 <br />
     -> Skeleton UI 추가로 사용자 경험 보완 <br />
     -> null 응답 처리 및 fallback 데이터 적용 <br />
     -> 캐싱된 데이터가 있을 경우 재요청 방지 <br />
        결과적으로 트래픽 절감 + 안정적인 대기질 정보 제공 UI 완성. <br />
2. 좋아요 초기화 문제 (로그인/로그아웃 시 상태 꼬임)
    * 문제점
      컴포넌트 렌더링 시 좋아요 상태를 localStorage와 서버 값 중 어디 기준으로 둘 <br />
      지 혼란 발생. 그 결과 로그인 전후로 좋아요 버튼 UI가 초기화되는 문제 발생. <br />
   * 해결 방법
      -> 서버 값을 최우선 기준으로 동기화 <br />
      -> localStorage는 "보조 캐시"로만 사용 <br />
      -> 조회 시 axios 응답 데이터에 좋아요 상태 보정 <br />
         일관된 좋아요 UI를 유지할 수 있게 됨. <br />
3. 대기질 슬라이더 자동 전환으로 인한 무한 로딩 문제
    * 문제점
      슬라이더가 자동으로 넘겨지는 과정에서 상태 업데이트가 과도하게 발생하여 <br />
      렌더링이 무한 반복됨. <br />
   * 해결 방법
     -> 자동 슬라이드 기능 제거 <br />
     -> 사용자 수동 Prev / Next 버튼 방식으로 변경 <br />
4. Null 데이터로 인한 화면 깨짐 문제
    * 문제점
      특정 지역에서 공공데이터가 null 또는 빈 문자열로 들어오는 경우 <br />
      카드 크기 깨짐 / 영역 붕괴 발생 <br />
   * 해결 방법
     -> 전용 Null 이미지(캐릭터 기반 일러스트) 추가 <br />
     -> fallback 텍스트·박스 제공으로 UI 전체 일관성 유지. <br />
5. 404 / NotFound 페이지 불통일
    * 문제점
      게시판·대기질·캠페인 등 서로 다른 컴포넌트가 제각각의 NotFound UI 사용.
    * 해결 방법
      -> 메인 캐릭터 기반으로 통합된 공통 NotFound UI 구성 <br />
      -> 카드·텍스트·버튼 스타일 통일 / 서비스 전체 톤앤매너 일관성 확보. <br />
  
> ### 최준영
1. 관리자 페이지 Tab 내부 FullCalendar 크기 깨짐 문제
    * 문제점
      탭 구조에서 Fullcalendar가 초기 렌더링 시 크기 계산을 제대로 하지 못해 <br />
      캘린더가 깨지거나 width가 0으로 표시되는 현상 발생.
    * 해결 방법
      -> 탭 전환 시 FullCalendar를 강제 re-render <br />
      -> calendarRef.current.getApi().render() 활용 <br />
         탭 클릭 시 정상적인 UI 표시가 가능해짐.
2. 관리자 공지사항 상세조회 경로 문제
     * 문제점
       1. 정상 게시글(status=Y) -> 뒤로가기 시 관리자 페이지가 아닌 일반 공지사항 <br />
      페이지로 이동 <br />
       2. 숨김 (status=N) 게시글 조회 시 403 발생<br />
     * 해결 방법
       -> 관리자 공지 상세 페이지를 일반 공지 상세 페이지와 분리 <br />
       -> /admin/notices/:id 형태의 관리자 전용 라우트 구성 <br />
       -> 관리자 Layout 내부에서만 렌더링되도록 구조 재정리 <br />
          호출 경로 및 권한 문제 모두 해결됨. <br />

> ### 현금자
1. 댓글 수정 시 동일 작성자의 모든 댓글이 동시에 수정 모드로 전환되는 문제
    * 문제 원인
      댓글 수정 모드 여부를 "작성자 이름(닉네임)" 기준으로 관리하여 <br />
      동일 사용자가 작성한 모든 댓글이 한꺼번에 수정 상태로 변경됨. <br />
    * 해결 방법
      -> 댓글마다 가지고 있는 고유 식별자(commentId)를 기준으로 수정 상태를 <br />
      관리하도록 변경 <br />
      -> 특정 댓글만 독립적으로 수정 모드가 동작하도록 개선 <br />
2. 로그인 여부/작성자 여부에 따른 버튼 노출 오류
     * 문제 원인
       비로그인 사용자, 또는 작성자가 아닌 사용자에게도 <br />
       수정/삭제 버튼이 노출되는 UI 문제가 발생
    * 해결 방법
      -> auth.isauthenticated 확인 후 비로그인 시 버튼 숨김 <br />
      -> 로그인한 사용자라면 <br />
         로그인 사용자 번호 === 댓글 작성자 번호를 비교하여 <br />
         작성자에게만 수정·삭제 버튼이 표시되도록 처리<br />

> ## 배운점

> ### 박수현
* 내용

> ### 박세혁
   * Axios 요청 및 헤더와 바디 데이터 전송 방식
   * Git 협업 방식 및 흐름
   * 소셜 로그인 API 활용
   * 여러가지 기획방법 및 툴 사용법
   * react 컴포넌트 활용에 대한 이해

> ### 백준걸
   * API 실패·null·지연 상황까지 고려한 UI 설계의 중요성
   * Skeleton, fallback, null 상태 처리 등 사용자 경험 보완 기법 학습
   * React 렌더링 타이밍(useEffect)과 상태관리의 영향력 이해
   * 공공데이터 API(429, 응답 지연 등)특성 경험을 통한 캐싱 구조 이해

> ### 최준영
   * 공식 문서를 기반으로 FullCalendar 등 외부 라이브러리를 직접 <br />
     적용해보며 활용법 학습
   * AJAX를 통한 프론트 ⇄ 백엔드 간 요청·응답 흐름 이해
   * 공통 UI 구조 설정 및 컴포넌트 재사용 구조를 익힘

> ### 현금자
   * 백엔드와 프론트 간 매핑 값이 정확히 일치해야 오류가 줄어듦
   * 테이블 컬럼, PK/FK, 구조를 먼저 이해하면 구현이 훨씬 수월해짐
   * 기능별 폴더 구조 정리가 작업 효율을 높인다는 점을 깨달음

> ## 개선 사항

> ### 박수현
* 내용

> ### 박세혁
   * 회원가입 시 비밀번호 재확인 기능 추가 필요
   * 카카오 외에도 타 소셜 로그인 확장 가능성
   * 관리자 비로그인 상태에서 /admin/home 이동 시 <br />
     아주 잠시 관리자 페이지가 노출되는 문제 개선 필요
   * 마이페이지·회원 관련 UI의 구조적 복잡성 개선 필요

> ### 백준걸
   * 리스트 페이지의 공통 컴포넌트화를 더 진행할 필요 있음
   * Skeleton/Null 패턴을 프로젝트 전체에 통일 적용 필요
   * 지도·좌표와 관련된 기능들의 재사용성 개선 여지 있음
   * 대기질·지도·댓글 등 상태 관리 패턴을 더 일원화할 필요 있음

> ### 최준영
   * 사용자 관점에서 발생 가능한 오류에 대한 에러 대응 UI 강화 필요
   * 한 파일에 여러 모듈이 섞여 있어 모듈 분리 및 폴더 구조 개선 필요
   * 캘린더·공지사항 UI의 공통 요소 추출 및 재사용성 향상 필요

> ### 현금자
   * 기능 단위로 폴더 구조를 더 명확하게 나누어 <br />
     작업·유지보수 효율을 높일 필요 있음
   * 일부 컴포넌트에서 중복 코드 제거 및 리팩토링 여지 존재

> ## 팀원 정보


| 이름 | 담당 | GitHub |
|------|------------------------|------------------------------|
| 박수현 (팀장) | 메인페이지 & 캠페인 | [![GitHub](https://img.shields.io/badge/GitHub-000?logo=github&logoColor=white)](https://github.com/Elinasu001) &nbsp; https://github.com/Elinasu001 |
| 백준걸 | 인증게시판 & 사이드바 | [![GitHub](https://img.shields.io/badge/GitHub-000?logo=github&logoColor=white)](https://github.com/ajungeul93-rgb) &nbsp; https://github.com/ajungeul93-rgb|
| 최준영 | 공지사항 | [![GitHub](https://img.shields.io/badge/GitHub-000?logo=github&logoColor=white)](https://github.com/cjysy0104) &nbsp;https://github.com/cjysy0104|
| 현금자 | 일반게시판 | [![GitHub](https://img.shields.io/badge/GitHub-000?logo=github&logoColor=white)](https://github.com/yoonja486) &nbsp;https://github.com/yoonja486|
| 박세혁 | 회원관리 & 로그인 | [![GitHub](https://img.shields.io/badge/GitHub-000?logo=github&logoColor=white)](https://github.com/Rostreaca) &nbsp;https://github.com/Rostreaca|

> ## 문의
* Email : (누군가의 이메일)
* GitHub Issues 활용
